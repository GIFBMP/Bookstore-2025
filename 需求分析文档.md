#### 业务流图

![](https://youke1.picui.cn/s1/2025/12/03/69302e169b397.png)

#### 数据流图

![](https://youke1.picui.cn/s1/2025/12/03/69303273a0650.png)

![](https://youke1.picui.cn/s1/2025/12/03/693032767434d.png)

#### 数据词典

`class Book`：描述一本书的主要信息，包含以下内容：
- `string ISBN`：图书的 `ISBN` 号
- `string name`：书名
- `string author`：作者
- `string[] keyword`：关键字
- `int storage_count`：库存量
- `double price`：单价

`class Account`：描述一个账号，包含以下内容：
- `string username`：用户名
- `string password`：密码
- `int type`：描述用户类型和权限高低

`storagedata`：二进制文件，存储书店当前的信息

`class BlockList`：块状链表，用于查询书籍

`class MemoryRiver`：文件读取类，用于维护文件内容和处理查询

`loglist`：系统日志，存储采购信息，盈利信息，系统操作记录，员工操作记录

#### 功能说明

1.图书管理模块

- 功能 1：查询
- `querybook ([ISBN] | [name] | [author] | [keyword]+)+`
- 输入：操作类型；图书的 `ISBN` 号，名字，作者或关键字
- 处理：在系统日志中记录
- 输出：该图书的库存量、单价和基本信息

- 功能 2：入库
- `store [ISBN] [name] [author] [keyword]+ [in_price] [out_price] [count]`
- 输入：操作类型；图书的 `ISBN` 号、名字、作者、关键字，以及其进货价格和售卖单价；图书的数量
- 处理：将对应数量的书加入库存，在系统日志中记录
- 输出：该图书的库存量、单价和基本信息

2.交易模块

- 功能 1：购买
- `buybook ([ISBN] | [name] | [author] | [keyword]+)+`
- 输入：操作类型；图书的 `ISBN` 号，名字，作者或关键字；购买数量
- 处理：检查是否有足够库存，若有，则将对应数量的书移出库存，否则返回错误；在系统日志中记录
- 输出：该图书的库存量、单价和基本信息

3.统计模块

- 功能 1：查询采购信息
- `querypurchasedata [start_time] [end_time]`
- 输入：操作类型；查询起始时间、结束时间
- 输出：在给定时间段按照采购顺序输出采购图书的 `ISBN` 号、数量、单价

- 功能 2：查询销售情况
- `querysaledata [start_time] [end_time]`
- 输入：操作类型；查询起始时间、结束时间
- 输出：在给定时间段按照采购顺序输出销售图书的 `ISBN` 号、数量、单价

- 功能 3：查询盈利情况
- `queryprofit [start_time] [end_time]`
- 输入：操作类型；查询起始时间、结束时间
- 输出：给定时间段内书店的收入、支出和利润

- 功能 4：查询工作报告
- `queryworkreport [username] [start_time] [end_time]`
- 输入：操作类型；员工用户名；起始时间、结束时间
- 输出：按顺序输出给定时间内该员工的操作记录

- 功能 5：查询系统日志
- `querysystemlog [start_time] [end_time]`
- 输入：操作类型；起始时间、结束时间
- 输出：按顺序输出给定时间内的系统日志

4.用户管理模块

- 功能 1：游客注册
- `register [username] [password]`
- 输入：操作类型；用户名；密码
- 处理：创建账号，赋予顾客权限
- 输出：注册成功

- 功能 2：登录
- `login [username] [password]`
- 输入：操作类型；用户名；密码
- 处理：检测用户名或密码是否正确，若正确则登录
- 输出：根据结果输出登录成功或失败

- 功能 3：员工创建账号
- `createaccount [username] [password] [type]`
- 输入：操作类型；用户名；密码；赋予权限
- 处理：创建账号，赋予对应权限
- 输出：创建成功